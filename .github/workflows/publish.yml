name: publish
on: [push]
before_script:
  - export JAVA_HOME="/usr/lib/jvm/java-openjdk"
jobs:
   publish-jmx-image:
      runs-on: ubuntu-latest

      steps:
         - uses: actions/checkout@v2
         - name: Login to GitHub Container Registry
           uses: docker/login-action@v1
           with:
             registry: ghcr.io
             username: ${{ github.actor }}
             password: ${{ secrets.GITHUB_TOKEN }}
         - name: Build the docker-imqbrokerd Docker image
           run: |
             docker build . --tag ghcr.io/swhite2016/jmx:latest
             docker run ghcr.io/swhite2016/jmx:latest
             docker push ghcr.io/swhite2016/jmx:latest

